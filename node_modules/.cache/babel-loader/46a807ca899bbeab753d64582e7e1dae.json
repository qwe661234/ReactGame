{"ast":null,"code":"var _jsxFileName = \"/Users/yenfuchen/ReactJs/first-app/src/Game.js\";\nimport React, { Component } from 'react';\nimport './style.css';\nimport Board from './Board.js'; // JSX 用 {} 標示代表裡面是純 javascript\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: [{\n        squares: Array(9).fill(null)\n      }],\n      stepNumber: 0,\n      xIsNext: true,\n      highlight: []\n    };\n  }\n\n  handleClick(i) {\n    const history = this.state.history.slice(0, this.state.stepNumber + 1);\n    const current = history[history.length - 1];\n    const squares = current.squares.slice();\n\n    if (this.calWin(squares) || squares[i]) {\n      return;\n    }\n\n    squares[i] = this.state.xIsNext ? \"X\" : \"O\";\n    this.setState(() => {\n      return {\n        // concat return a new array, it is better tahn push in React (immutable)\n        history: history.concat([{\n          squares: squares\n        }]),\n        xIsNext: !this.state.xIsNext,\n        stepNumber: history.length\n      };\n    });\n  }\n\n  jumpTo(step) {\n    this.setState(() => {\n      return {\n        stepNumber: step,\n        xIsNext: step % 2 === 0\n      };\n    });\n  }\n\n  reset() {\n    this.setState(() => {\n      return {\n        history: [{\n          squares: Array(9).fill(null)\n        }],\n        stepNumber: 0,\n        xIsNext: true\n      };\n    });\n  }\n\n  calWin(squares) {\n    var count = 0;\n    const lines = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n\n      if (squares[line[0]] !== null && squares[line[1]] === squares[line[0]] && squares[line[2]] === squares[line[0]]) {\n        this.setState(() => {\n          return {\n            highlight: line\n          };\n        });\n        return squares[line[0]];\n      }\n    }\n\n    for (let i = 0; i < squares.length; i++) {\n      if (squares[i] !== null) {\n        count++;\n      }\n    }\n\n    if (count === 9) return 'tie';\n    return null;\n  }\n\n  render() {\n    console.log();\n    const history = this.state.history;\n    const current = history[this.state.stepNumber];\n    const winner = this.calWin(current.squares);\n    const moves = history.map((item, index) => {\n      const desc = index ? \"Go to move #\" + index : \"Go to game start\";\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            this.jumpTo(index);\n          },\n          children: [\" \", desc, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this);\n    });\n    const draw = winner === \"tie\" ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        this.reset();\n      },\n      children: \" Draw \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 43\n    }, this) : null;\n    let status;\n\n    if (winner) {\n      if (winner === \"tie\") {\n        status = \"Tie\";\n      } else {\n        status = \"Winner: \" + winner;\n      }\n    } else {\n      status = 'Next player: ' + (this.state.xIsNext ? \"X\" : \"O\");\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-board\",\n        children: [/*#__PURE__*/_jsxDEV(Board, {\n          squares: current.squares,\n          onClick: i => this.handleClick(i),\n          status: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this), draw]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          children: moves\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["/Users/yenfuchen/ReactJs/first-app/src/Game.js"],"names":["React","Component","Board","Game","constructor","props","state","history","squares","Array","fill","stepNumber","xIsNext","highlight","handleClick","i","slice","current","length","calWin","setState","concat","jumpTo","step","reset","count","lines","line","render","console","log","winner","moves","map","item","index","desc","draw","status"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './style.css';\nimport Board from './Board.js'\n// JSX 用 {} 標示代表裡面是純 javascript\nclass Game extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            history: [{\n                squares: Array(9).fill(null),\n            }\n            ],\n            stepNumber: 0,\n            xIsNext: true,\n            highlight:[],\n        }\n    }\n\n    handleClick(i) {\n        const history = this.state.history.slice(0, this.state.stepNumber + 1);\n        const current = history[history.length - 1];\n        const squares = current.squares.slice();\n        if (this.calWin(squares) || squares[i]) {\n            return;\n        }\n        squares[i] = this.state.xIsNext ? \"X\" : \"O\";\n        this.setState(() => {\n            return {\n                // concat return a new array, it is better tahn push in React (immutable)\n                history: history.concat([{\n                    squares: squares,\n                }]),\n                xIsNext: !this.state.xIsNext,\n                stepNumber: history.length,\n            }\n        })\n    }\n\n    jumpTo(step) {\n        this.setState(() => {\n            return {\n                stepNumber: step,\n                xIsNext: (step % 2) === 0, \n            }\n        })\n    }\n\n    reset() {\n        this.setState(() => {\n            return {\n                history: [{\n                    squares: Array(9).fill(null),\n                }\n                ],\n                stepNumber: 0,\n                xIsNext: true, \n            }\n        }) \n    }\n\n    calWin(squares){\n        var count = 0;\n        const lines = [\n            [0, 1, 2],\n            [3, 4, 5],\n            [6, 7, 8],\n            [0, 3, 6],\n            [1, 4, 7],\n            [2, 5, 8],\n            [0, 4, 8],\n            [2, 4, 6]\n        ];\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i];\n            if (squares[line[0]] !== null && squares[line[1]] === squares[line[0]] && squares[line[2]] === squares[line[0]]){\n                this.setState(() => {\n                    return {\n                        highlight: line,\n                    }\n                })\n                return squares[line[0]];\n            }  \n        }\n        for (let i = 0; i < squares.length; i++) {\n            if (squares[i] !== null) {\n                count ++;\n            }\n        }\n        if(count === 9)\n            return 'tie';\n        return null;    \n    }\n\n    render() {\n        console.log();\n        const history = this.state.history;\n        const current = history[this.state.stepNumber];\n        const winner = this.calWin(current.squares);\n        \n        const moves = history.map((item, index) => {\n            const desc = index ?\n            \"Go to move #\" + index :\n            \"Go to game start\";\n            return (\n                <li key={index}>\n                    <button onClick={() => {this.jumpTo(index)}}> {desc} </button>\n                </li>\n            )\n        })\n        const draw = (winner === \"tie\") ? <button onClick={() => {this.reset()}}> Draw </button> : null ;\n        let status;\n        if (winner) {\n            if(winner === \"tie\") {\n                status = \"Tie\";\n            }else {\n                status = \"Winner: \" + winner;\n            }\n        } else {\n            status = 'Next player: ' + (this.state.xIsNext ? \"X\" : \"O\");\n        }\n        return (\n        <div className=\"game\">\n            <div className=\"game-board\">\n            <Board \n                squares = {current.squares}\n                onClick = {(i) => this.handleClick(i)}\n                status = {status}\n            />\n            {draw}\n            </div>\n            <div className=\"game-info\">\n            <div>{status}</div>\n            <ol>{moves}</ol>\n            </div>\n        </div>\n        );\n    }\n}\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}